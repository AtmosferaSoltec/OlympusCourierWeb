<div>

    <div class="flex items-center gap-2 text-p-700">
        <button mat-icon-button (click)="back()" matTooltip="Volver">
            <mat-icon>arrow_back</mat-icon>
        </button>
        <app-titulo titulo="Nuevo Reparto"></app-titulo>
    </div>

    <app-buscar-cliente></app-buscar-cliente>

    <div class="flex items-center justify-between">

        <span class="text-xl text-textos font-medium">Lista de Items</span>
        <app-boton text="Agregar Item" icon="add" witdh="w-36" (clickEvent)="openDialogAddItemReparto()"></app-boton>

    </div>
    <app-tabla-items></app-tabla-items>

    <form [formGroup]="formulario" class="flex items-center gap-3">
        <div>
            <label class="block mb-1 text-sm font-medium text-t">Clave</label>
            <input formControlName="clave" type="password" placeholder="Clave para recojo"
                class="bg-gray-50 border border-gray-300 text-textos text-sm rounded-lg focus:ring-p1 focus:border-p1 p-2.5">
        </div>
        <div>
            <label class="block mb-1 text-sm font-medium text-t">Anotación</label>
            <input formControlName="anotacion" type="text" placeholder="Ingrese alguna observación"
                class="w-80 bg-gray-50 border border-gray-300 text-textos text-sm rounded-lg focus:ring-p1 focus:border-p1 p-2.5" />
        </div>
        <div>
            <label class="block mb-1 text-sm font-medium text-t">Adicional</label>
            <input formControlName="cobro_adicional" type="text" placeholder="Cobro adicional"
                class="bg-gray-50 border border-gray-300 text-textos text-sm rounded-lg focus:ring-p1 focus:border-p1 p-2.5" />
        </div>

        <div class="flex-auto"></div>

        <span class="total mr-3 font-semibold text-xl text-p-700">
            Total S/{{getTotal()}}
        </span>
    </form>

    <div class="flex justify-end gap-3 mt-3">
        @if (service.isLoadingAgregarReparto()) {
        <div class="loader"></div>
        }@else {
        <app-boton text="Cancelar" (clickEvent)="cancel()" color="Secundario" witdh="w-24"></app-boton>
        <app-boton text="Guardar" (clickEvent)="guardarReparto()" witdh="w-24"></app-boton>
        }
    </div>
</div>